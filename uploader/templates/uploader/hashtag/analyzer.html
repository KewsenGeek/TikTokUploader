{% extends 'uploader/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <h3>Анализ хэштега (instagrapi)</h3>
  <form method="post" class="mt-3">
    {% csrf_token %}
    <div class="mb-3">
      <label for="account_id" class="form-label">Аккаунт</label>
      <select name="account_id" id="account_id" class="form-select" required>
        <option value="">Выберите аккаунт</option>
        {% for acc in accounts %}
          <option value="{{ acc.id }}" {% if form_account_id == acc.id|stringformat:'s' %}selected{% endif %}>{{ acc.username }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label for="hashtag" class="form-label">Хэштег</label>
      <input type="text" name="hashtag" id="hashtag" value="{{ form_hashtag }}" class="form-control" placeholder="например: downhill" required />
    </div>
    <button class="btn btn-primary" type="submit">Анализировать</button>
  </form>

  {% if logs %}
  <div class="mt-4">
    <h5>Логи</h5>
    <pre class="bg-light p-3" style="max-height: 300px; overflow:auto;">{% for l in logs %}{{ l }}
{% endfor %}</pre>
  </div>
  {% endif %}
</div>
{% endblock %}


