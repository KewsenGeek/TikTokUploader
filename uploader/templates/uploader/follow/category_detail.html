{% extends 'uploader/base.html' %}
{% block content %}
<h2>Category: {{ category.name }}</h2>

<div class="row g-4">
  <div class="col-md-6">
    <h4>Add single target</h4>
    <form method="post" action="{% url 'follow_target_add' category.id %}" class="mb-4">{% csrf_token %}
      <div class="input-group" style="max-width:420px">
        {{ target_form.username }}
        <button class="btn btn-primary" type="submit">Add</button>
      </div>
    </form>
  </div>
  <div class="col-md-6">
    <h4>Bulk add</h4>
    <form method="post" action="{% url 'follow_target_add' category.id %}">{% csrf_token %}
      <div class="mb-2">{{ bulk_form.usernames }}</div>
      <button class="btn btn-outline-primary" type="submit">Add Many</button>
    </form>
  </div>
</div>

<h4 class="mt-4">Targets</h4>
<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>Username</th>
      <th>User ID</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for t in targets %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>@{{ t.username }}</td>
      <td>{{ t.user_id|default:'â€”' }}</td>
      <td>
        <a class="btn btn-outline-danger btn-sm" href="{% url 'follow_target_delete' category.id t.id %}">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-muted">No targets</td></tr>
    {% endfor %}
  </tbody>
</table>

<a class="btn btn-secondary" href="{% url 'follow_category_list' %}">Back</a>
{% endblock %}
