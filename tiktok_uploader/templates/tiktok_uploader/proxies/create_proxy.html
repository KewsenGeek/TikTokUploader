{% extends "tiktok_uploader/base.html" %}

{% block title %}Add New Proxy - TikTok Uploader{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Хлебные крошки -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'tiktok_uploader:dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="{% url 'tiktok_uploader:proxy_list' %}">Proxies</a></li>
            <li class="breadcrumb-item active">Add New</li>
        </ol>
    </nav>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-plus-circle me-2"></i>
                        Add New Proxy Server
                    </h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}

                        <!-- Основные данные прокси -->
                        <h6 class="mb-3">Proxy Details</h6>

                        <div class="row mb-3">
                            <div class="col-md-8">
                                <label for="host" class="form-label">Host (IP or Domain) *</label>
                                <input type="text" class="form-control" id="host" name="host" placeholder="192.168.1.1 or proxy.example.com" required>
                                <small class="form-text text-muted">IP address or domain name of the proxy server</small>
                            </div>
                            <div class="col-md-4">
                                <label for="port" class="form-label">Port *</label>
                                <input type="number" class="form-control" id="port" name="port" min="1" max="65535" placeholder="8080" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="proxy_type" class="form-label">Proxy Type *</label>
                            <select class="form-select" id="proxy_type" name="proxy_type" required>
                                <option value="HTTP">HTTP</option>
                                <option value="HTTPS" selected>HTTPS</option>
                                <option value="SOCKS5">SOCKS5</option>
                            </select>
                        </div>

                        <hr>

                        <!-- Аутентификация -->
                        <h6 class="mb-3">Authentication (Optional)</h6>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="username" class="form-label">Username</label>
                                <input type="text" class="form-control" id="username" name="username" placeholder="proxy_user">
                            </div>
                            <div class="col-md-6">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" name="password" placeholder="proxy_password">
                            </div>
                        </div>

                        <hr>

                        <!-- Дополнительные настройки -->
                        <h6 class="mb-3">Additional Settings</h6>

                        <div class="mb-3">
                            <label for="ip_change_url" class="form-label">IP Change URL (Optional)</label>
                            <input type="url" class="form-control" id="ip_change_url" name="ip_change_url" placeholder="https://api.proxy-provider.com/change-ip?key=...">
                            <small class="form-text text-muted">URL to request IP rotation (if supported by provider)</small>
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" name="notes" rows="3" placeholder="Additional notes about this proxy..."></textarea>
                        </div>

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="test_on_create" name="test_on_create" checked>
                            <label class="form-check-label" for="test_on_create">
                                Test proxy connection after creation
                            </label>
                        </div>

                        <hr>

                        <div class="d-flex justify-content-between">
                            <a href="{% url 'tiktok_uploader:proxy_list' %}" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-lg"></i> Add Proxy
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Информационный блок -->
            <div class="card mt-4">
                <div class="card-body">
                    <h6><i class="bi bi-info-circle me-2"></i>Proxy Configuration Tips:</h6>
                    <ul class="mb-0">
                        <li><strong>Host:</strong> Can be an IP address (e.g., 192.168.1.1) or domain (e.g., proxy.example.com)</li>
                        <li><strong>Port:</strong> Common ports are 8080, 3128, 1080, but can be any port 1-65535</li>
                        <li><strong>Type:</strong> Most modern proxies use HTTPS or SOCKS5 for better security</li>
                        <li><strong>Authentication:</strong> If your proxy requires login, provide username and password</li>
                        <li><strong>IP Change URL:</strong> Some proxy providers offer API to rotate IPs - useful for ban prevention</li>
                        <li><strong>Testing:</strong> We recommend testing the proxy after creation to verify it works</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

